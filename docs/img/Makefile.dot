


%-dot.pdf: %.dot
	dot $< -Tpdf -o $@

%-dot.png: %.dot
	dot $< -Tpng -o $@

%-dot.eps: %.dot
	dot $< -Teps -o $@

%-dot.svg: %.dot
	dot $< -Tsvg -o $@

%-dot.map: %.dot
	dot $< -Tcmapx -o $@
# Note: For some od reason, inside <map> tag $TARGET is capitalized.
# Rewrite done for html below.

%-dot.txt: %.dot
	ln -s $< $@

%-dot.html: Makefile %.dot %-dot.map %-dot.png %-dot.svg
	@echo '<html>' > $@
	@echo "<!-- Generated by Makefile (don't edit this file) /-->" >> $@
	@echo '<body>' >> $@
	@echo '<img src="'$(TARGET).png'" usemap="#'$(TARGET)'" alt="" >' >> $@
	@echo '<map id="'$(TARGET)'" name="'$(TARGET)'">' >> $@
	@grep '^<map .*>' -v $(TARGET).map >> $@
	@echo '<hr />' >> $@
	@echo '<ul>' >> $@
	@echo '<li><a href="'$(TARGET).svg'" >SVG version</a></li>' >> $@
	@echo '<li><a href="'$(TARGET).dot'" >Original (dot file)</a></li>' >> $@
	@echo '</ul>' >> $@
	@echo '</body>' >> $@
	@echo '</html>' >> $@

