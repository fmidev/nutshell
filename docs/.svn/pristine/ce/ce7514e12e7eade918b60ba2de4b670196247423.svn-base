<html>

  <head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="/favicon.ico" />

    
    <style>

      BODY {
        margin: 40px 40px 40px 20px;
      }
      
      H1, .LEAD {
        font-family: Helvetica,Arial,SansSerif;
      }
      
      TD {
        border: 1px solid black;
      }

      .LEAD {
        border: none;
        horizontal-align: right;
        font-weight: bold;
        background-color: lightgray;
      }

      TH.LEAD {
        font-size: x-large;
      }
      
    </style>

    <!-- NOTE: ET parser fails in reading lt and gt characters -->
    <script language="javascript" type="text/javascript" >
      console.log('TEST')
      var DEBUG = {}
      // var requests
      
      function send_request(elem){
      DEBUG.form = elem.form
      if (!elem.value){
        elem.value = ''
      }
      const requests = elem.value.split(',')
      elem.form.elements.request.value = requests
      console.log(requests)
      DEBUG.requests = requests
      if (requests.indexOf('STATUS') == -1){ // lt/gt fails in ET parser
         elem.form.target = 'product'
      }
      else {
         elem.form.target = '_self'
      }
      elem.form.submit()
      }
    </script>

    
  </head>
  
  <body>
    
    <h1 id="greeting"><a href="/nutshell/server"><img src="/img/nutshell-logo.png" alt="home" border="0" width="64" height="64" style="vertical-align:middle" /></a> NutShell Server</h1>

    <p id="notif_head_elem" style="color: gray; font-family: monospace"></p>
    <!--h3 id="notif_elem"></h3 -->
   
    <form id="form" method="GET" target="product" action="/nutshell/server" >

      <table astyle="border-radius: 5x; background-color: lightblue">
	
	<tr>
	  <th class="LEAD" colspan="2">Request</th>
	</tr>
	<tr>
	  <td class="LEAD">Request</td>
	  <td>
	    <input type="text" id="request" name="request" value="" />
	    <!-- button type="submit" name="request0" value="MAKE">Make</button -->
	    <!-- console.warn(this); X = this /-->
	    <button type="button" value="MAKE" onclick="send_request(this)">Make</button>
	    <button type="button" value="DELETE,STATUS" onclick="send_request(this)">Delete</button>    
	    <button type="button" value="DELETE,MAKE" onclick="send_request(this)">Remake</button>    
	    <button type="button" value="STATUS" onclick="send_request(this)">Status</button>
	    <button type="button" value="STATUS,INPUTS" onclick="send_request(this)">Status2</button>
    	  </td>
	</tr>
	<tr>
	  <td class="LEAD">Product</td>
	  <td>
	    <input id="product" name="product" type="text" size="80" value="201708121600_radar.rack.comp_SIZE=800,800_SITES=fikor,fivan,fiika_BBOX=20,60,30,70.png" ></input>
	  </td>
	</tr>
      </table>
      <!--a href="/stop">STOP</a-->
    </form>

    <span id="request_elem"></span>

    <pre id="error_elem" style="color: red"></pre>

    <span id="product_elem"></span>

    <span id="inputs_elem"></span>

    <span id="status_elem"></span>

    <!-- button type="button" onclick="if (window.confirm('Stop NutShell Server?')) document.location='/stop' " >Stop server</button -->

    <hr />

    <span id="version_elem"></span>

    <pre id="dump_elem"></pre>
    
  </body>
</html>
