.. NutShell test demo doc file
   generated automatically by
   util/make-tests.sh
   mpeura@mpeura10kl
   (do not edit!)

.. _tests:

=====
Tests
=====

This tests are run prior to publishing a release. The tests apply both command line invocations
and http queries.
   


Initial tests
=============

The following commands are for command line only.


Help command
------------

.. code-block::
   :caption: Test 

        nutshell --help
*Return value: 0* 

Unknown command
---------------

.. code-block::
   :caption: Test 

        nutshell --foo
*Return value: 2* 

Undefined action
----------------

.. code-block::
   :caption: Test 

        nutshell --actions FOO
*Return value: 2* 

Parsing error
-------------

.. code-block::
   :caption: Test 

        nutshell foo.pdf
*Return value: 1* 

Testing Cmd and Http interfaces
===============================


Tests (cmdline)
===============


Default action (MAKE)
---------------------

.. code-block::
   :caption: Test cmdline

        nutshell 201412161845_demo.image.pattern_HEIGHT=200_PATTERN=OCTAGONS_WIDTH=300.png
*Return value: 0* 

Does product file exist?
------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --exists 201412161845_demo.image.pattern_HEIGHT=200_PATTERN=OCTAGONS_WIDTH=300.png
*Return value: 0* 

Action: DELETE product file
---------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --delete 201412161845_demo.image.pattern_HEIGHT=200_PATTERN=OCTAGONS_WIDTH=300.png
*Return value: 0* 
.. code-block::
   :caption: Test cmdline

        nutshell --exists 201412161845_demo.image.pattern_HEIGHT=200_PATTERN=OCTAGONS_WIDTH=300.png
*Return value: 1* 

Action: MAKE product (generate, if nonexistent)
-----------------------------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --make 201412161845_demo.image.pattern_HEIGHT=200_PATTERN=OCTAGONS_WIDTH=300.png
*Return value: 0* 

Action: GENERATE (unconditionally)
----------------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --make 201412161845_demo.image.pattern_HEIGHT=200_PATTERN=OCTAGONS_WIDTH=300.png
*Return value: 0* 

Parameters in wrong order (generated file has them in order)
------------------------------------------------------------

Generated file has them in order.

.. code-block::
   :caption: Test cmdline

        nutshell --generate demo.image.pattern_WIDTH=300_HEIGHT=200_PATTERN=OCTAGONS.png
*Return value: 0* 

Product error messages
----------------------


Initial check - valid generation
--------------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --generate demo.image.pattern_HEIGHT=200_PATTERN=OCTAGONS_WIDTH=300.png
*Return value: 0* 

Error test: image too large
---------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --generate demo.image.pattern_WIDTH=1200_HEIGHT=1200_PATTERN=OCTAGONS.png
*Return value: 1* 

Error test: Illegal (negative) arguments
----------------------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --generate demo.image.pattern_WIDTH=-300_HEIGHT=-200_PATTERN=OCTAGONS.png
*Return value: 1* 

Error test: Unsupported feature
-------------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --generate demo.image.pattern_WIDTH=200_HEIGHT=200_PATTERN=SQUARE.png
*Return value: 1* 

Error test: Unsupported file format
-----------------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --generate demo.image.pattern_WIDTH=200_HEIGHT=200_PATTERN=OCTAGONS.pdf
*Return value: 1* 

Local actions: copy, link and move
==================================


Move the resulting file to specified location
---------------------------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --move . --make 201012161615_test.ppmforge_DIMENSION=2.5.png
*Return value: 0* 
*Return value: 0* 

Copy the resulting file to specified location
---------------------------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --copy . --make 201012161615_test.ppmforge_DIMENSION=2.5.png
*Return value: 0* 
*Return value: 0* 

Link the resulting file to specified location
---------------------------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --link . --make 201012161615_test.ppmforge_DIMENSION=2.5.png
*Return value: 0* 
*Return value: 0* 

Link the resulting file to SHORTCUT (non-timestamped) directory
---------------------------------------------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --shortcut 201012161615_test.ppmforge_DIMENSION=2.5.png
*Return value: 0* 

Link the resulting file, as LATEST one
--------------------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --latest 201012161615_test.ppmforge_DIMENSION=2.5.png
*Return value: 0* 

Cmd and Http interplay test
===========================


Generate on command line, delete through HTTP
---------------------------------------------

.. code-block::
   :caption: Test cmdline

        nutshell --generate demo.image.pattern_HEIGHT=200_PATTERN=OCTAGONS_WIDTH=300.png
`$NUTSHELL?actions=DELETE&product=demo.image.pattern_HEIGHT=200_PATTERN=OCTAGONS_WIDTH=300.png </nutshell/NutShell?actions=DELETE&product=demo.image.pattern_HEIGHT=200_PATTERN=OCTAGONS_WIDTH=300.png>`_

*Return value: 0* 

Generate through HTTP, delete on command line
---------------------------------------------

`$NUTSHELL?actions=GENERATE&product=demo.image.pattern_HEIGHT=200_PATTERN=OCTAGONS_WIDTH=300.png </nutshell/NutShell?actions=GENERATE&product=demo.image.pattern_HEIGHT=200_PATTERN=OCTAGONS_WIDTH=300.png>`_

.. code-block::
   :caption: Test cmdline

        nutshell --delete demo.image.pattern_HEIGHT=200_PATTERN=OCTAGONS_WIDTH=300.png
*Return value: 0* 

Meteorological...
=================

.. code-block::
   :caption: Test cmdline

        nutshell --generate 201708121600_radar.rack.comp_BBOX=18,58,28,64_CTARGET=C_PALETTE=default_SITES=fikor,fiika,fivan_SIZE=800,800.png
*Return value: 0* 
